sudo: required

services:
    - docker
env:
    global:
        - DOCKER_COMPOSE_VERSION: 1.21.2

before_install:
  - sudo rm /usr/local/bin/docker-compose
  - curl -L https://github.com/docker/compose/releases/download/${DOCKER_COMPOSE_VERSION}/docker-compose-`uname -s`-`uname -m` > docker-compose
  - chmod +x docker-compose
  - sudo mv docker-compose /usr/local/bin

script:
    - docker-compose build image-service
    - docker images


deploy:
    provider: heroku
    api_key:
        secure: "L6uazCYiB4L0HyFWFNJ4QpQR66Q9QYYm6W9412fFp6l/J0BHK3OOoLEBHZVxQ0NInHvOOSWas6pIlXp9sGJv1IOtim4oZRpQ199kGKCpJ6+P4kMkBAJjeplcVN3AOwk8ou2ZZ0WO8r8iJsIVvoLmttVZsTR5qG4Glre5/6B5ESVPN0z17AvdWOvfDbc++7yAOiqjWBNj7UU9Fe0ED9mEt2MbOGY410diNDSdt/k/Hpb4ntUkzJIQvz8F73Lwx6DHUBl9TAxjVUNHMHIRwtcjecu6gR2mqL9JEjLCMXBsO7qWoJXctQfY8jtgaF6VLyFMe3V/YPfyF3oalumPgwVbxV5zfWamOqIS3QB2jby71QF3u0lWNg3/3Ffcm+s96iI3J60tE/GwgHDDDqyHY4KP3X+bQSsBXVk1gpWzwr29ErZ/rJ1zUmXKdkRj/9kd01JRm5rhGV3GA/WiNKEkjLiE1045Fyp66L03y3kcaYi/ppmZagyFTlva5yBKDqlduMrHWxjjXzaVvQOB/A9iPr3yhg8AI0vBUrGPbsgK81XHC2U2OzCPxJ7X+x/2/T8oevA1mDjpxSHTBatb118cv0/D2X/vhN6U6t0UJ6OKTkBqL1D0evBERKI1dcuBhHWsXmF6Fg7tcdILsxRb628yl/mGGGKt3ERoDy1ym+Ur2HTPQzY="
    app: devops-exam-image-service 
    on:
        repo: andrewbermejo20/devops_exam
        branch: development 
