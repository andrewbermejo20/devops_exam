sudo: required

services:
    - docker
env:
    global:
        - DOCKER_COMPOSE_VERSION: 1.21.2

before_install:
  - sudo rm /usr/local/bin/docker-compose
  - curl -L https://github.com/docker/compose/releases/download/${DOCKER_COMPOSE_VERSION}/docker-compose-`uname -s`-`uname -m` > docker-compose
  - chmod +x docker-compose
  - sudo mv docker-compose /usr/local/bin

script:
    - docker-compose build image-service
    - docker images


deploy:
    provider: heroku
    api_key:
        secure: "rSI8y4bytgaYR17pyUsVmMzrxftl46soZnipjDwz03wsjc07YopX5ZVzPKaiey5eERwDkxIxOj9Yyx0FfF3JCgVTuZ/HMEm9ACwR+pRSM0jITfcOMNKNKWn83iU2vKkBdggQp1TKBva5HVqzQ/IvZIaDH81xiTidzZmVlVK06EC/ElHeeOrrxmWBCpoPJRIhasCFzUOuYThIukT+iOu6ybGiJqfKtk+ioBmb+hHeGeaYpTUckZdnk8JWqw+LyDIGXcMlrLP+9fG+F+6wsKQIkhgj3feGbRlcaw1BunrSLceq2cpPmjiCradTAn8btWZPkGHWtA1VCzIe169yUM3qbKsI7/j4D/DHg2r97k0a/8xV+SQ0o+iW52XcxuyRCfozqHO6a3Zcb95C9hTy+4pim6gyQMTdPVZWNBcXoo1whkMBe2VFZHRJLAT3EpyS0EftDdAj4w/BCEpcQAyjN4mm597h8FklyoDd7XOI//WTU1zOHHnAcIXG8zG8v5mTdX67kXIoIaeGHbH21HvdJ1U7egridFGCYyTkBA43FxLHozW9F4VNk3nyQwyPlv0SDsQqpISLTnKs2ODU3caP16LKJF4NsKrUDxjjTjROW1Z90/fR52aF55hCwpIY2EMqEqf5ipWBtOss4hIQmKuVbvOicvgpzxB54uyScROoJDsLxUE="
    app: devops-exam-image-service 
    on:
        repo: andrewbermejo20/devops_exam
        branch: development 
